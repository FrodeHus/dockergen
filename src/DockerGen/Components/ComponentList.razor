@using DockerGen.Container
@using System.Reflection

<ul class="component-list">
    @foreach (var component in AvailableComponents)
    {
        <InstructionComponent Title="@component.DisplayName" OnDrag="StartDrag" CssClass="component" Instruction="component"></InstructionComponent>
    }
</ul>

@code {
    [CascadingParameter]
    public Pages.Index ContainerEditor { get; set; }
    private List<Instruction> AvailableComponents { get; set; }

    protected override void OnInitialized()
    {
        AvailableComponents = ContainerService.GetValidInstructions();
    }
    private void StartDrag(Instruction instruction)
    {
        var instance = (Instruction)Activator.CreateInstance(instruction.GetType());
        ContainerEditor.CurrentInstruction = instance;
    }
}