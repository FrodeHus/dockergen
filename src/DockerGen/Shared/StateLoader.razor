@using DockerGen.Container
@using DockerGen.Features.Container.Store
@inherits FluxorComponent
@inject IDispatcher Dispatcher
@inject ContainerService ContainerService
@inject IState<ContainerState> State
@code {

	protected override void OnInitialized()
	{
		SubscribeToAction<ContainerUpdatedAction>(_ => Dispatcher.Dispatch(new ContainerPersistStateAction(State.Value)));
	}

	protected override async Task OnAfterRenderAsync(bool firstRender)
	{
		base.OnAfterRender(firstRender);
		if (firstRender)
		{
			await ContainerService.GetValidRecipesAsync();
			Dispatcher.Dispatch(new ContainerLoadStateAction());
		}
	}
}